---
layout: clean
---

<div class="home">

<style type="text/css">
.destination-label {
  display: none;
}

.destination-dropdown {
  background-image: none;
  pointer-events: none;
}

.button-primary {
  display: none;
}

.column {
  display: inline-block;
  width: 49%;
}

.wrapper {
  margin-top: 100px;
  max-width: 800px;
}
</style>

<script>
$(function() {
  $destinationButton = $(".js-go-to-dinner");
  
  $.getJSON("http://ip-api.com/json/?callback=?", function(data) {
    $(".js-region1").text(data.regionName);
    $(".js-stad1").text(data.city);
    selectCityWithNameOrRegion(data.city, data.regionName);
  });

  var apiKey = "8c9eb059e09c366cd341e0cfc8a3d249e53c97a5634756bd12d5edee7df965a1";

  $.getJSON("http://api.ipinfodb.com/v3/ip-city/?key=" + apiKey + "&format=json", function(data) {
    $(".js-region2").text(data.regionName);
    $(".js-stad2").text(data.cityName);
  });

  $.getJSON('http://ipinfo.io', function(data){
    $(".js-region3").text(data.region);
    $(".js-stad3").text(data.city);
  });

  function selectCityWithNameOrRegion(cityName, cityRegion) {
    // Find a city with an identical name in the option group, and select it
    var selection = $(".js-cities-group option[value='" + cityName +"']");

    // If no city is available with the same name, use the region as a name (could be .e.g Stockholm)
    if (!selection.length && cityRegion) {
      selection = $(".js-cities-group option[value='" + cityRegion +"']");
    }
    
    // If no selection, abort
    if (!selection.length) { return; }

    // Set it to selected
    selection.prop('selected', true);
    updateDestinationButtonFromSelectedOption();
  }

  $(".js-destination-dropdown").change(function(e) {
    updateDestinationButtonFromSelectedOption();
  });

  // Update CTA button to go to page for chosen destination
  function updateDestinationButtonFromSelectedOption() {
    var selected = $(".js-destination-dropdown option:selected");
    $destinationButton.attr("href", selected.attr("data-url"));
  }

});

</script>

  <div class="wrapper">
    <div class="column column-left">
      <h2>Din information</h2>
      <h3>Grupp 1</h3>
      <ul>
        <li class="js-region1"></li>
        <li class="js-stad1"></li>
      </ul>
      <h3>Grupp 2</h3>
      <ul>
        <li class="js-region2"></li>
        <li class="js-stad2"></li>
      </ul>
      <h3>Grupp 3</h3>
        <li class="js-region3"></li>
        <li class="js-stad3"></li> 
    </div>
    <div class="column column-right">
      <h2>Vår gissning (baserad på Grupp 1)</h2>
      {% include destination-dropdown.html %}
    </div>
  </div>

</div>
